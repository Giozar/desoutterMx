---
import type { CollectionEntry } from 'astro:content'
import { getCollection } from 'astro:content'
import Meet from '../../layouts/Meet.astro'
export const prerender = true

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  let info = await getCollection('meetUs', ({ data }) => {
    return data
  })
  return info.map((post, i) => ({
    params: { slug: post.slug },
    props: {
      post,
      prev: i > 0 && info[i - 1],
      next: i < info.length - 1 && info[i + 1]
    }
  }))
}

export interface Props {
  post: CollectionEntry<'meetUs'>
  prev: CollectionEntry<'meetUs'>
  next: CollectionEntry<'meetUs'>
}

// 2. When its time to render, you can get the entry directly from the prop
const { post, prev, next } = Astro.props

// @ts-ignore
const { Content } = await post.render()
let fm = post.data
// console.log(post.data)
// console.log(Content)
---

<Meet frontmatter={fm} {prev} {next}>
  <Content />
</Meet>
