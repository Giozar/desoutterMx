---
import Base from "@layouts/Base.astro";
import SubSubCategoriesList from "@components/herramientas/SubSubCategoriesList.astro";
import NavigationTools from "@components/herramientas/NavigationTools.astro";
const desoutterAPI = import.meta.env.PUBLIC_DESOUTTER_API || "https://7yc636gsjj.execute-api.us-east-1.amazonaws.com/prod";
const {categoryId, categoryName, subcategoryId,subcategoryName} = Astro.params;

const descriptionsCategories = [
  "Descubre nuestras herramientas " + subcategoryName + " para la solución de montaje, ideales para aplicaciones automotrices, industriales y arquitectónicas. Eficiencia y precisión para desmontaje, fijación y más.",
  "Utiliza "+ subcategoryName + "para soluciones avanzadas para instalaciones solares, automotrices y baja tensión. Simplifica tus proyectos con nuestro sistema de montaje eléctrico.",
  "Desata tu potencial usando "+ subcategoryName + " con nuestros desatornilladores eléctricos. Recargables, precisos, inalámbricos y con luz. La herramienta ideal para cualquier tarea.",
  "Potencia y precisión en cada sujeción con " + subcategoryName + ". Descubre nuestras herramientas neumáticas para talleres mecánicos, automotrices y montaje industrial. ¡Optimiza tu trabajo!",
  "Control total en aplicaciones automotrices con "+ subcategoryName+". Nuestro sistema de medición de torques te brinda precisión a distancia para llantas, amortiguadores y más. ¡Optimiza el rendimiento!",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
]
const descriptionPageTools = descriptionsCategories[Number(categoryId)];
// console.log(subcategoryId, subcategoryName);

const frontmatter = {
  title: "Desoutter Tools México | " + subcategoryName,
  description: descriptionPageTools,
  keywords: [
  "Desoutter Tools México", categoryName, "Herramientas Industriales", "Soluciones de Ensamblaje", "Herramientas Eléctricas", "Innovación Industrial", 
    "Fabricación de Precisión", "Automatización de Procesos", "Tecnología Industrial", "Eficiencia en Ensamblaje", "Productividad Industrial"
  ],
  authorName: "Desumex",
  language: "es",
  canonicalUrl: Astro.url.href,
  facebookTitle: "Desoutter Tools México" + subcategoryName,
  facebookDescription: descriptionPageTools,
  facebookImage: `https://s3.amazonaws.com/desumex.com.mx/subcategorias/${subcategoryName}.jpg`,
  facebookURL: Astro.url.href,
  twitterTitle: "Desoutter Tools México" + subcategoryName,
  twitterDescription: descriptionPageTools,
  twitterImage: `https://s3.amazonaws.com/desumex.com.mx/subcategorias/${subcategoryName}.jpg`
}
const path = `/herramientas/${categoryId}/${categoryName}/${subcategoryId}/${subcategoryName}`;
// Función para realizar la petición fetch por subsubcategoría
async function getSubsubcategories(categoryId:String|undefined, categoryName:String|undefined, subcategoryId:String|undefined, subcategoryName:String|undefined) {
  try {
    const response = 
    await fetch(`${desoutterAPI}/herramientas/${categoryId}/${categoryName}/${subcategoryId}/${subcategoryName}`);
    if (!response.ok) {
        // Si la respuesta no es exitosa, lanzar un error con el status
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return await response.json();
  } catch (error) {
     // Afirmación de tipo para indicar que 'error' es de tipo 'Error'
      console.error('Error en la solicitud:', (error as Error).message);
  }
}

// Realiza la petición fetch y almacena los datos en el objeto

const data = (subcategoryName !== '[object Object]') ?
   await getSubsubcategories(categoryId, categoryName, subcategoryId, subcategoryName).catch((error)=>{
    console.log('No hay subsubcategoria en esta sección');
    console.error(error);
   }) : {};


---
<Base frontmatter={frontmatter}>
  <NavigationTools />
    <SubSubCategoriesList data={data} path={path} />
</Base>